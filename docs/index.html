<!DOCTYPE html><html><head><title>Route Callers to DNC via IVR- RingCentral Developer Tutorials</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="72x72" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="114x114" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/jquery-ui@1.12.1/themes/base/all.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div class="dpw-header-container"><div class="dpw-header center-section"><div class="logo"><a href="https://developers.ringcentral.com" class="logo-link"></a></div><div class="nav-top-menus"></div><div class="dpw-login-section"><a href="https://developer.ringcentral.com/login.html#/">Sign in | Sign up</a></div></div></div><div id="viewsaurus" data-title="Route Callers to DNC via IVR"><div class="saurus-panes"><div class="saurus-panes-header"><a href="https://developers.ringcentral.com/tutorials.html" class="saurus-back-to-tutorials">Tutorials</a><span>&gt;</span><span>Route Callers to DNC via IVR</span></div><div class="saurus-prose"><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw icon-menu"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Learn how to allow callers to put themsevles on the do not call list by routing through IVR Studio and using the Engage Voice Platform API to add their number to the do not call list. Click the &quot;Start Tutorial&quot; button below to begin.</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Engage Voice DNC Via IVR Tutorial" class="chapter"><div data-title="Welcome!" data-file="../blank.md" class="step"><h2 id="welcome-to-the-tutorial">Welcome to the tutorial</h2>
<p>This tutorial will walk you through the process of routing callers to options that allow them to put themselves on the do not call list.</p>
<p>For this tutorial, you&#39;ll do most of the work in the Engage Voice UI, but must add the caller to the do not call list using a REST API call.</p>
<p><img src="images/ivr-dnc-welcome.png" alt=""></p>
</div><div data-title="Get Input" data-file="../input-properties.md" class="step"><h2 id="get-input-from-the-caller-using-dmtf">Get input from the caller using DMTF</h2>
<p>Let&#39;s begin by creating a workflow in IVR Studio that answers the call and asks for input from the caller about what they would like to do next. In this property window, we create two DTMF options that can direct the call down one of our two paths. The audio file instructs the caller what their options are and in this case, we have the option to leave a voicemail (1) or be put on the do not call list (2).</p>
<p><img src="images/ivr-answer-input.png" alt="">
<img src="images/input-properties-dialog.png" alt=""></p>
</div><div data-title="Press 2, Route to DNC" data-file="../www-properties.md" data-highlight="7" class="step"><h2 id="route-caller-to-dnc">Route caller to DNC</h2>
<p>Since the caller elected to be put on the do not call list by pressing &quot;2&quot;, we can put them on our DNC list using the REST call.  First click on the &quot;?&quot; and select &quot;2&quot; as the input connection property selection.</p>
<p><img src="images/ivr-answer-input-www.png" alt="">
<img src="images/get-input-connection-properties-dialog.png" alt=""></p>
</div><div data-title="Configure Remote Call" data-file="../www-properties.md" data-highlight="1-6" class="step"><h2 id="rest-api-endpoint-for-dnc">REST API endpoint for DNC</h2>
<p>Let&#39;s configure the REST API call to place this caller on the DNC using their ANI (phone number). First we&#39;ll need to enter some information like the method (Type), endpoint (URL), and content type (Format) that will define this action.</p>
<p><img src="images/ivr-answer-input-www.png" alt="">
<img src="images/www-properties-dialog.png" alt=""></p>
</div><div data-title="Create Request Body" data-file="../www-properties.md" data-highlight="8-21" class="step"><h2 id="rest-api-body-content-in-json">REST API body content in JSON</h2>
<p>Then we&#39;ll need to construct the request body (Body Content) using their ANI (phone number). The data for the JSON body content is shown here.</p>
<p>Replace {accountId} with your own account ID.</p>
<p><img src="images/ivr-answer-input-www.png" alt="">
<img src="images/www-properties-dialog.png" alt=""></p>
</div><div data-title="Authenticate With Token" data-file="../www-properties.md" data-highlight="8-21" class="step"><h2 id="rest-api-http-headers-for-authentication">REST API HTTP headers for authentication</h2>
<p>And finally add a custom header with your authentication token.</p>
<p>To create your own token, click <a href="https://developers.ringcentral.com/engage/voice/guide/authentication/auth-legacy">here</a>.</p>
<p>Replace the {your auth token} with the auth token you just generated.</p>
<p><img src="images/ivr-answer-input-www.png" alt="">
<img src="images/www-properties-dialog-header.png" alt=""></p>
</div><div data-title="Play Audio" data-file="../play-audio-properties.md" class="step"><h2 id="play-audio-for-dnc">Play audio for DNC</h2>
<p>Now configure a Play Audio node to let the caller know that their ANI (phone number) has been place on the do not call list.</p>
<p><img src="images/ivr-answer-input-www-audio.png" alt="">
<img src="images/play-audio-properties-dialog.png" alt=""></p>
</div><div data-title="Hangup" data-file="../blank.md" class="step"><h2 id="close-ivr-workflow-with-hangup">Close IVR workflow with hangup</h2>
<p>With the caller&#39;s name now on the DNC, and after letting the caller know their name is on the DNC, we can hangup this call.</p>
<p><img src="/images/ivr-answer-input-www-audio-hangup.png" alt=""></p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="../blank.md" data-mode="markdown"></textarea>
<textarea class="saurus-file" data-file="../input-properties.md" data-mode="markdown">Tm9kZSBJZDogICAgICAgICAgICAgICAgICAgIGdldERpZ2l0c18wClR5cGU6ICAgICAgICAgICAgICAgICAgICAgICBFeGFjdCBpbnB1dApFbmFibGUgU3BlZWNoIFJlY29nbml0aW9uOiAgZmFsc2UKU2F2ZSBJbnB1dCBmb3IgUmVwb3J0aW5nOiAgIHRydWUKQXVkaW8gRmlsZTogICAgICAgICAgICAgICAgICJxX2NhbGxiYWNrX3ByZXNzMSIKTm8gSW5wdXQ6ICAgICAgICAgICAgICAgICAgICJubyBhdWRpbyBmaWxlIgpJbnZhbGlkIElucHV0OiAgICAgICAgICAgICAgIm5vIGF1ZGlvIGZpbGUiCkRUTUYgSW5wdXQ6ICAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAyCgpSZXNwb25zZSBUaW1lb3V0OiAgICAgICAgICAgNQpUb3RhbCBBdHRlbXB0czogICAgICAgICAgICAgMwo=</textarea>
<textarea class="saurus-file" data-file="../www-properties.md" data-mode="markdown">Tm9kZSBJZDogRE5DClR5cGU6IEhUVFAgUG9zdApVUkw6IGh0dHBzOi8vZW5nYWdlLnJpbmdjZW50cmFsLmNvbS9hcGkvdjEvYWRtaW4vYWNjb3VudHMve2FjY291bnRJZH0vZG5jTGlzdHMKQ29uY3VycmVudCBBdWRpbzogZG5jX29yX3FfYnllClRpbWVvdXQ6IDMwCkZvcm1hdDogSlNPTgoKewogICAgImRuY1RhZyI6CiAgICAgIHsKICAgICAgICAiZG5jVGFnSWQiOjAsCiAgICAgICAgImRuY1RhZ0xhYmVsIjoiR0xPQkFMIgogICAgICB9LAogICAgImNvdW50cnlDb2RlIjoKICAgICAgewogICAgICAgICJpZCI6IlVTQSIKICAgICAgfSwKICAgICJwaG9uZSI6IiRhbmkiLAogICAgInRhZyI6IkdMT0JBTCIsCiAgICAiZG5jVGFnSWQiOjAKfQo=</textarea>
<textarea class="saurus-file" data-file="../play-audio-properties.md" data-mode="markdown">Tm9kZSBJZDogIHBsYXlBdWRpb18wCkF1ZGlvOiAgICBkbmNfb3JfcV9ieWUKQmFyZ2UgSW46IHRydWUK</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><div class="saurus-file-actions"><a href="https://github.com/ringcentral-tutorials/dnc-via-ivr-rest-demo" target="_blank" class="explorer-get-code"><i class="fa fa-lg fa-github-square"></i>View Code on GitHub</a><a href="https://github.com/ringcentral-tutorials/dnc-via-ivr-rest-demo/archive/master.zip" target="_blank" class="explorer-get-code"><i class="fa fa-lg icon-download"></i>Download Source Code</a></div></div></div></div><footer><div class="footer-content"><div class="footer-content-row layout-2-cols"><div class="footer-content-row-left"><div class="footer-logo"><a href="http://www.ringcentral.com"><span>Back to the main site</span></a></div></div><div class="footer-content-row-right"><ul class="footer-text-links"><li><a href="http://www.ringcentral.com/legal.html" target="_blank"><span>Legal</span></a></li><li><a href="http://www.ringcentral.com/security-statement.html" target="_blank"><span>Security Policy</span></a></li><li><a href="http://www.ringcentral.com/legal/privacy-policy.html" target="_blank"><span>Privacy Policy</span></a></li><li><a ng-href="https://devcommunity.ringcentral.com" target="_blank" href="https://devcommunity.ringcentral.com"><span>Community</span></a></li><li><a href="https://medium.com/ringcentral-developers" target="_blank"><span>Blog</span></a></li></ul></div></div><div class="footer-content-row footer-content-row-last layout-2-cols"><div class="footer-content-row-left"><span class="footer-copyright">© 1999-<span ng-bind="::main.nowObj|date:'yyyy'" class="footer-copyright-to ng-binding">2017</span> RingCentral, Inc. All rights reserved.</span></div><div class="footer-content-row-right"><div class="footer-image-links"><div class="footer-image-link footer-image-link-facebook"><a target="_blank" href="http://www.facebook.com/ringcentral"><i class="fa icon-facebook"></i></a></div><div class="footer-image-link footer-image-link-twitter"><a target="_blank" href="http://twitter.com/ringcentraldevs"><i class="fa icon-twitter"></i></a></div><div class="footer-image-link footer-image-link-google-plus"><a target="_blank" href="https://www.google.com/+ringcentral"><i class="fa icon-google_plus"></i></a></div><div class="footer-image-link footer-image-link-linkedin"><a target="_blank" href="http://www.linkedin.com/company/ringcentral"><i class="fa icon-linkedin"></i></a></div><div class="footer-image-link footer-image-link-youtube"><a target="_blank" href="http://www.youtube.com/ringcentral"><i class="fa icon-youtube"></i></a></div></div></div></div></div></footer></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script><script>window.tutorialName="Route Callers to DNC via IVR";</script><script src="viewsaurus.js"></script></body></html>